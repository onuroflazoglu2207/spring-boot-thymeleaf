<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <div class="progress-bar bg-white text-dark">
        <h2>User Lists</h2>
    </div>
</div>
<div class="container">
    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th th:each="field: ${T(com.example.demo.controller.WebController).userDtoField()}" th:text="${field}"
                class="text-center"/>
            <th class="text-center">Actions</th>
        </tr>
        <form method="get" th:action="@{/web/v1/users/getAll}" th:object="${webDto}">
            <tr>
                <th class="text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{nameOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{nameBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <input type="text" class="input-group" th:value="${webDto.nameField}" th:field="*{nameField}">
                </th>
                <th class="text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{birthdayOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{birthdayBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <input type="date" class="input-group" th:value="${webDto.birthdayField}"
                           th:field="*{birthdayField}">
                </th>
                <th class=" text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{genderOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{genderBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <select class="input-group" th:field="*{genderField}">
                        <option th:each="gender: ${T(com.example.demo.controller.WebController).genderFieldWithNull()}"
                                th:value="${gender}" th:text="${gender}"/>
                    </select>
                </th>
                <th class=" text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{emailOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{emailBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <input type="text" class="input-group" th:value="${webDto.emailField}" th:field="*{emailField}">
                </th>
                <th class=" text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{phoneOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{phoneBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <input type="text" class="input-group" th:value="${webDto.phoneField}" th:field="*{phoneField}">
                </th>
                <th class=" text-center">
                    <select class="userDtoFieldCountArray input-group" th:field="*{passwordOrder}">
                        <option th:each="number: ${T(com.example.demo.controller.WebController).userDtoFieldCountArray()}"
                                th:value="${number}" th:text="${number}"/>
                    </select>
                    <select class="input-group" th:field="*{passwordBy}">
                        <option th:each="order: ${T(com.example.demo.controller.WebController).DirectionField()}"
                                th:value="${order}" th:text="${order}"/>
                    </select>
                    <input type="text" class="input-group" th:value="${webDto.passwordField}"
                           th:field="*{passwordField}">
                </th>
                <th class="text-center">
                    <div class="placeholder col-12 bg-white opacity-100">
                        <select class="col-4" th:field="*{condition}">
                            <option th:each="con: ${T(com.example.demo.controller.WebController).conditionField()}"
                                    th:value="${con}" th:text="${con}"/>
                        </select>
                        <select class="col-3" th:field="*{page}" id="pageSelect">
                            <option th:each="pg: ${#numbers.sequence(0, (pageDto.totalPages > 0 ? (pageDto.totalPages)-1 : 0))}"
                                    th:value="${pg}" th:text="${pg}"/>
                        </select>
                        <select class="col-3" th:field="*{size}" id="sizeSelect">
                            <option th:each="sz: ${T(com.example.demo.controller.WebController).sizeCountArray()}"
                                    th:value="${sz}" th:text="${sz}"/>
                        </select>
                    </div>
                    <input type="submit" class="btn btn-outline-dark col-12" value="Search"/>
                    <a class="btn btn-outline-dark col-12" onclick="window.location.href='save'">Save</a>
                </th>
            </tr>
        </form>
        </thead>
        <tbody>
        <tr th:each="user: ${listDto}">
            <form method="get" th:action="@{/web/v1/users/updateOrDelete/__${user.identity}__}">
                <td th:text="${user.name}" class="text-center"/>
                <td th:text="${user.birthday}" class="text-center"/>
                <td th:text="${user.gender}" class="text-center"/>
                <td th:text="${user.email}" class="text-center"/>
                <td th:text="${user.phone}" class="text-center"/>
                <td th:text="${user.password}" class="text-center"/>
                <td class="text-center">
                    <input class="btn btn-outline-dark col-12" type="submit" value="Update Or Delete"/>
                </td>
            </form>
        </tr>
        </tbody>
    </table>
</div>
<script th:inline="javascript">
    const orders = document.getElementsByClassName("userDtoFieldCountArray");
    let oldValue = 0, orderValues = [];
    for (let a = 0; a < orders.length; a++) {
        orders[a].onfocus = (element) => {
            orderValues = [];
            for (let b = 0; b < orders.length; b++)
                orderValues.push(orders[b].value);
            oldValue = parseInt(element.target.value);
        }
        orders[a].onchange = (element) => {
            orders[orderValues.indexOf(element.target.value)].value = oldValue;
        }
    }
</script>
<script th:inline="javascript">
    const totalElements = [[${pageDto.totalElements}]];
    const sizeSelect = document.getElementById("sizeSelect");
    const pageSelect = document.getElementById("pageSelect");
    sizeSelect.onchange = function () {
        while (pageSelect.options.length > 0)
            pageSelect.options.remove(0);
        const length = totalElements / sizeSelect.value;
        for (let a = 0; a < length; a++) {
            const option = document.createElement("option");
            option.value = a.toString();
            option.innerHTML = a.toString();
            pageSelect.options.add(option);
        }
    }
</script>
</body>
</html>